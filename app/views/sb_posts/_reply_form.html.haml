= content_tag 'p', h(flash[:bad_reply]), :class => 'notice alert alert-error' if flash[:bad_reply]
.errors
= remote_form_for :post, @post, :url => sb_posts_path(:forum_id => @forum, :topic_id => @topic, :page => @topic.last_page), :html => {:class => "MainForm"}, :before => "$('editbox_spinner').show();tinyMCE.triggerSave()" do |f|
  %table{"cellspacing"=>"0", "border"=>"0", "cellpadding"=>"0", "width"=>"100%"}
    %tr{"style"=>"vertical-align:top;"}
      %td
        = f.text_area :body, :style => "width: 99%; height: 300px;", :class => "rich_text_editor"
      - if !logged_in? && configatron.recaptcha_pub_key && configatron.recaptcha_priv_key 
        %td
          .control-group
            %label.control-label{"for"=>"comment[author_name]"}
              =:name.l
            .controls= f.text_field :author_name

          .control-group
            %label.required.control-label{"for"=>"comment[author_email]"}
              =:email.l
            .controls= f.text_field :author_email     

          .control-group
            %label.control-label{"for"=>"comment[author_url]"}
              =:comment_web_site_label.l
            .controls= f.text_field :author_url, :size => 35                  
        %td
          = recaptcha_tags :ajax => true
          %p
            = ajax_spinner_for "editbox", "spinner_black.gif"                    
            = submit_tag :save_reply.l, :class => 'btn btn-primary'
            = :or.l 
            = link_to_function :cancel.l, "$('reply').hide()"
      -else
        %td
          %p
            = ajax_spinner_for "editbox", "spinner_black.gif"                    
            = submit_tag :save_reply.l, :class => 'btn btn-primary'
            = :or.l 
            = link_to_function :cancel.l, "$('reply').hide()"    
            